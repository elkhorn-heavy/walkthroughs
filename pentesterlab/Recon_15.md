# PentesterLab - Recon 15

PentesterLab offers a series of reconnaissance ("recon") challenges designed to
teach basic security skills.

## Challenge Overview

In this challenge, the goal is to do a DNS zone transfer from the internal zone
`int` using the name server for `z.hackycorp.com`.

Grade: Easy

## Initial Analysis

This seems like it'll be fairly straight-forward. Trying `dig`:

```
$ dig axfr int @z.hackycorp.com

; <<>> DiG 9.20.0-2ubuntu3.1-Ubuntu <<>> axfr int @z.hackycorp.com
;; global options: +cmd
int.                    604800  IN      SOA     int. internals. 2 604800 86400 2419200 604800
int.                    604800  IN      NS      int.
int.                    604800  IN      A       127.0.0.1
recon_15.int.           604800  IN      TXT     "00000000-0000-0000-0000-000000000000"
int.                    604800  IN      SOA     int. internals. 2 604800 86400 2419200 604800
;; Query time: 1227 msec
;; SERVER: 51.158.147.132#53(z.hackycorp.com) (TCP)
;; WHEN: Tue Mar 18 10:54:51 PDT 2025
;; XFR size: 5 records (messages 1, bytes 229)
```

We can see that there is a subdomain `recon_15.int.`, which has a TXT record
containing the key.

> Note: the real challenge key has been replaced with a fake _UUID_.

## Takeaways

This challenge demonstrates the concept of zone transfers to find subdomains.
This normally isn't possible, as the transfers should be locked down to specific
destinations. In this case, though, a misconfiguration shows us that another
subdomain exists. This is fortunate because the name of that subdomain is
something that probably wouldn't appear in a dictionary.

## Beyond the Challenge

### Alternative Methods to Solve the Challenge

Using `dig` is one way to retrieve DNS information. The command `nslookup` can
also be used:

```
$ nslookup -query=AXFR int z.hackycorp.com
Server:         z.hackycorp.com
Address:        51.158.147.132#53

int
        origin = int
        mail addr = internals
        serial = 2
        refresh = 604800
        retry = 86400
        expire = 2419200
        minimum = 604800
int     nameserver = int.
Name:   int
Address: 127.0.0.1
recon_15.int    text = "00000000-0000-0000-0000-000000000000"
int
        origin = int
        mail addr = internals
        serial = 2
        refresh = 604800
        retry = 86400
        expire = 2419200
        minimum = 604800
```

> Note: the real challenge key has been replaced with a fake _UUID_.
