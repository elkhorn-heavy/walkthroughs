# PentesterLab - Recon 14

PentesterLab offers a series of reconnaissance ("recon") challenges designed to
teach basic security skills.

## Challenge Overview

In this challenge, the goal is to do a DNS zone transfer from `z.hackycorp.com`.

Grade: Easy

## Initial Analysis

This seems like it'll be fairly straight-forward. Trying `dig`:

```
$ dig axfr z.hackycorp.com @z.hackycorp.com

; <<>> DiG 9.20.0-2ubuntu3.1-Ubuntu <<>> axfr z.hackycorp.com @z.hackycorp.com
;; global options: +cmd
z.hackycorp.com.        604800  IN      SOA     ns1.hackycorp.com. ns1.hackycorp.com. 2 604800 86400 2419200 604800
z.hackycorp.com.        604800  IN      NS      z.hackycorp.com.
z.hackycorp.com.        604800  IN      A       51.158.147.132
key.z.hackycorp.com.    604800  IN      TXT     "00000000-0000-0000-0000-000000000000"
recon_14.z.hackycorp.com. 604800 IN     TXT     "00000000-0000-0000-0000-000000000000"
z.hackycorp.com.        604800  IN      SOA     ns1.hackycorp.com. ns1.hackycorp.com. 2 604800 86400 2419200 604800
;; Query time: 307 msec
;; SERVER: 51.158.147.132#53(z.hackycorp.com) (TCP)
;; WHEN: Tue Mar 18 10:26:15 PDT 2025
;; XFR size: 6 records (messages 1, bytes 289)
```

We can see that there is another subdomain `recon_14`, which has a TXT record
containing the key.

> Note: the real challenge keys have been replaced with fake _UUIDs_.

## Takeaways

This challenge demonstrates the concept of zone transfers to find subdomains.
This normally isn't possible, as the transfers should be locked down to specific
destinations. In this case, though, a misconfiguration shows us that another
subdomain exists. This is fortunate because the name of that subdomain is
something that probably wouldn't appear in a dictionary.

## Beyond the Challenge

### Alternative Methods to Solve the Challenge

Using `dig` is one way to retrieve DNS information. The command `nslookup` can
also be used:

```
$ nslookup -query=AXFR z.hackycorp.com z.hackycorp.com
Server:         z.hackycorp.com
Address:        51.158.147.132#53

z.hackycorp.com
        origin = ns1.hackycorp.com
        mail addr = ns1.hackycorp.com
        serial = 2
        refresh = 604800
        retry = 86400
        expire = 2419200
        minimum = 604800
z.hackycorp.com nameserver = z.hackycorp.com.
Name:   z.hackycorp.com
Address: 51.158.147.132
key.z.hackycorp.com     text = "00000000-0000-0000-0000-000000000000"
recon_14.z.hackycorp.com        text = "00000000-0000-0000-0000-000000000000"
z.hackycorp.com
        origin = ns1.hackycorp.com
        mail addr = ns1.hackycorp.com
        serial = 2
        refresh = 604800
        retry = 86400
        expire = 2419200
        minimum = 604800
```

> Note: the real challenge keys have been replaced with fake _UUIDs_.
