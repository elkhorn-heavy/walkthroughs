# PentesterLab - Recon 11

PentesterLab offers a series of reconnaissance ("recon") challenges designed to
teach basic security skills.

## Challenge Overview

In this challenge, the goal is to use visual reconnaissance to gain information.
The information will be in red and found on a website with the domain name
matching the format `0x00.a.hackycorp.com` where it can be `0x00`, or `0x01`,
etc. The hint given is that the tool Aquatone can be used.

Grade: Medium

## Initial Analysis

It's tempting to brute force this. By visiting http://0x00.a.hackycorp.com we
see a page that contains a key, but the key is in blue. Looking at
http://0x01.a.hackycorp.com there likewise is a key but it is in black. With
there potentially being 256 different sites (0x00 to 0xFF), it would be a bit
annoying to do this one by one.

Turning to curl, we see:

```sh
$ curl http://0x01.a.hackycorp.com
<html>
  <h1>Welcome</h1>
  <img src="/logo.png"/>
</html>
```

Sneaky! The key is actually an image, so we can't do something like looping
through all the URLs and grepping the output for CSS styles like `color=red`.
How difficult would it be to parse the PNG and pull the colours out of it? That
seems like it's getting way off track!

So Aquatone looks like it was purposely built for exactly this sort of thing:
scanning sites and providing a report on how they look visually. However, the
repository on GitHub has been archived, which isn't a good sign. Trying to run
the code it only got screenshots for 8 of 256 urls, which isn't helpful at all.

While I realize the larger goal here is to learn a tool, the small goal is to
find the flag. Will my laptop melt if I open 256 tabs in the browser?

```sh
$ for i in {0..255}; do firefox `printf http://0x%02x.a.hackycorp.com $i`; done
```

- 256 tabs opened with the last one displayed
- `0xff.a.hackycorp.com` is the recon_06 page, so that's too high
- hitting CTRL-w many times gets to...
- `0xc8.a.hackycorp.com` is the recon_06 page, so that's still too high
- `0xc7.a.hackycorp.com` is image for this challenge, but not the right colour
- hitting CTRL-w many times gets to...
- `0x81.a.hackycorp.com` is red image for this challenge

## Takeaways

This challenge is supposed to demonstrate how to use a tool that does a visual
reconnaissance of a web site. Such a tool would be help to learn, but there are
only 256 hosts to try for this challenge. The "ergonomics" of looking at a web
page and hitting CTRL-w isn't that bad. After switching to this tactic the key
was found in a couple of minutes.

## Beyond the Challenge

### Alternative Methods to Solve the Challenge

The point of PentesterLab is to learn pen testing techniques _and tools_, so
the best thing would be to figure out how to do this more efficiently - some day
it might be useful!

In the meantime, another option is to script the download of the logo.png files.
Then they can be viewed and scrolled through using the filesystem GUI!

```sh
$ mkdir /tmp/foo
$ cd !$
$ for i in {0..255}; do HEX=$(printf "0x%02x" $i); echo $HEX; wget -q http://$HEX.a.hackycorp.com/logo.png -O $HEX-logo.png; done
```
